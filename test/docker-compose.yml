version: "3.3"
services:
  tcpdump:
    build:
      context: .
      dockerfile: Dockerfile.tcpdump
    volumes:
      - ../tcpdump:/var/tcpdump

  mysql:
    image: mysql/mysql-server:5.7
    network_mode: service:tcpdump
    volumes:
      - ./sql:/docker-entrypoint-initdb.d/

  pcap2mysql-log:
    build:
      context: ..

  test:
    build:
      context: .
      dockerfile: Dockerfile.test
    depends_on:
      - mysql
    network_mode: service:tcpdump
